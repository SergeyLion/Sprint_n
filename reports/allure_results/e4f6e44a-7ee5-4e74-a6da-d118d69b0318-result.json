{"name": "Проверка закрытия окна после отмены заказа", "status": "skipped", "statusDetails": {"message": "XFAIL Модальное окно заказа, не закрывается по нажатию на кнопку Отмены\n\nFailed: Окно заказа не закрылось после отмены", "trace": "self = <tests.test_taxi_order_flow.TestTaxiOrderFlow object at 0x00000130436B69E0>\ndriver = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"8f7a1dffc23b260911a811532da68c4e\")>\n\n    @allure.story(\"Отмена заказа через кнопку 'Отменить'\")\n    @allure.title(\"Проверка закрытия окна после отмены заказа\")\n    @pytest.mark.xfail(reason=\"Модальное окно заказа, не закрывается по нажатию на кнопку Отмены\")\n    def test_cancel_order_closes_window(self, driver):\n        \"\"\"\n        1. Создать заказ такси\n        2. Нажать кнопку 'Отменить'\n        3. Проверить, что окно заказа закрылось\n        \"\"\"\n        with allure.step(\"Подготовка: открытие страницы, ввод адресов и выбор тарифов\"):\n            main_page = MainPage(driver)\n            main_page.open(Bd.URL_YA_TRACK)\n            main_page.prepare_taxi_order()\n    \n        with allure.step(\"Выбор тарифа 'Рабочий' и делаем заказ\"):\n            main_page.click_element(Fsl.WORKER_TARIFF)\n            main_page.click_element(Fsl.REQUIREMENTS_HEADER)\n            main_page.click_element(Fsl.CONFIRM_ORDER_BUTTON)\n    \n        with allure.step(\"Нажимаем кнопку 'Отменить'\"):\n            main_page.click_element(Orl.CANCEL_BUTTON)\n            allure.attach(\n                driver.get_screenshot_as_png(),\n                name=\"after_cancel_click\",\n                attachment_type=allure.attachment_type.PNG\n            )\n    \n        with allure.step(\"Проверяем, что окно заказа закрылось\"):\n            try:\n>               main_page.wait_for_invisibility(Orl.ORDER_WAITING_CONTAINER, 10)\n\ntests\\test_taxi_order_flow.py:182: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\npages\\base_page.py:136: in wait_for_invisibility\n    WebDriverWait(self.driver, timeout).until(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <selenium.webdriver.support.wait.WebDriverWait (session=\"8f7a1dffc23b260911a811532da68c4e\")>\nmethod = <function invisibility_of_element_located.<locals>._predicate at 0x0000013043B82B60>\nmessage = ''\n\n    def until(self, method: Callable[[D], Union[Literal[False], T]], message: str = \"\") -> T:\n        \"\"\"Calls the method provided with the driver as an argument until the \\\n        return value does not evaluate to ``False``.\n    \n        :param method: callable(WebDriver)\n        :param message: optional message for :exc:`TimeoutException`\n        :returns: the result of the last call to `method`\n        :raises: :exc:`selenium.common.exceptions.TimeoutException` if timeout occurs\n        \"\"\"\n        screen = None\n        stacktrace = None\n    \n        end_time = time.monotonic() + self._timeout\n        while True:\n            try:\n                value = method(self._driver)\n                if value:\n                    return value\n            except self._ignored_exceptions as exc:\n                screen = getattr(exc, \"screen\", None)\n                stacktrace = getattr(exc, \"stacktrace\", None)\n            if time.monotonic() > end_time:\n                break\n            time.sleep(self._poll)\n>       raise TimeoutException(message, screen, stacktrace)\nE       selenium.common.exceptions.TimeoutException: Message:\n\nvenv\\Lib\\site-packages\\selenium\\webdriver\\support\\wait.py:105: TimeoutException\n\nDuring handling of the above exception, another exception occurred:\n\nself = <tests.test_taxi_order_flow.TestTaxiOrderFlow object at 0x00000130436B69E0>\ndriver = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"8f7a1dffc23b260911a811532da68c4e\")>\n\n    @allure.story(\"Отмена заказа через кнопку 'Отменить'\")\n    @allure.title(\"Проверка закрытия окна после отмены заказа\")\n    @pytest.mark.xfail(reason=\"Модальное окно заказа, не закрывается по нажатию на кнопку Отмены\")\n    def test_cancel_order_closes_window(self, driver):\n        \"\"\"\n        1. Создать заказ такси\n        2. Нажать кнопку 'Отменить'\n        3. Проверить, что окно заказа закрылось\n        \"\"\"\n        with allure.step(\"Подготовка: открытие страницы, ввод адресов и выбор тарифов\"):\n            main_page = MainPage(driver)\n            main_page.open(Bd.URL_YA_TRACK)\n            main_page.prepare_taxi_order()\n    \n        with allure.step(\"Выбор тарифа 'Рабочий' и делаем заказ\"):\n            main_page.click_element(Fsl.WORKER_TARIFF)\n            main_page.click_element(Fsl.REQUIREMENTS_HEADER)\n            main_page.click_element(Fsl.CONFIRM_ORDER_BUTTON)\n    \n        with allure.step(\"Нажимаем кнопку 'Отменить'\"):\n            main_page.click_element(Orl.CANCEL_BUTTON)\n            allure.attach(\n                driver.get_screenshot_as_png(),\n                name=\"after_cancel_click\",\n                attachment_type=allure.attachment_type.PNG\n            )\n    \n        with allure.step(\"Проверяем, что окно заказа закрылось\"):\n            try:\n                main_page.wait_for_invisibility(Orl.ORDER_WAITING_CONTAINER, 10)\n            except TimeoutException:\n                allure.attach(\n                    driver.get_screenshot_as_png(),\n                    name=\"window_not_closed\",\n                    attachment_type=allure.attachment_type.PNG\n                )\n>               pytest.fail(\"Окно заказа не закрылось после отмены\")\nE               Failed: Окно заказа не закрылось после отмены\n\ntests\\test_taxi_order_flow.py:189: Failed"}, "description": "\n1. Создать заказ такси\n2. Нажать кнопку 'Отменить'\n3. Проверить, что окно заказа закрылось\n", "steps": [{"name": "Подготовка: открытие страницы, ввод адресов и выбор тарифов", "status": "passed", "steps": [{"name": "Открываем страницу 'https://ez-route.stand.praktikum-services.ru/'", "status": "passed", "parameters": [{"name": "url", "value": "'https://ez-route.stand.praktikum-services.ru/'"}], "start": 1745159758181, "stop": 1745159758725}, {"name": "Подготовить заказ такси (ввод адресов и открытие формы)", "status": "passed", "steps": [{"name": "Вводим адреса: Хамовнический Вал, 34 -> Зубовский бульвар, 37", "status": "passed", "steps": [{"name": "Вводим текст 'Хамовнический Вал, 34' в поле ввода ('css selector', 'input#from')", "status": "passed", "steps": [{"name": "Ждем когда элемент ('css selector', 'input#from') станет кликабельным", "status": "passed", "parameters": [{"name": "locator", "value": "('css selector', 'input#from')"}], "start": 1745159758725, "stop": 1745159758757}], "parameters": [{"name": "locator", "value": "('css selector', 'input#from')"}, {"name": "set_data", "value": "'Хамовнический Вал, 34'"}], "start": 1745159758725, "stop": 1745159758928}, {"name": "Вводим текст 'Зубовский бульвар, 37' в поле ввода ('css selector', 'input#to')", "status": "passed", "steps": [{"name": "Ждем когда элемент ('css selector', 'input#to') станет кликабельным", "status": "passed", "parameters": [{"name": "locator", "value": "('css selector', 'input#to')"}], "start": 1745159758928, "stop": 1745159758962}], "parameters": [{"name": "locator", "value": "('css selector', 'input#to')"}, {"name": "set_data", "value": "'Зубовский бульвар, 37'"}], "start": 1745159758928, "stop": 1745159759101}], "start": 1745159758725, "stop": 1745159759101}, {"name": "Выбираем быстрый маршрут", "status": "passed", "steps": [{"name": "Нажимаем на элемент ('xpath', \"//div[contains(@class, 'mode') and text()='Быстрый']\")", "status": "passed", "steps": [{"name": "Ждем когда элемент ('xpath', \"//div[contains(@class, 'mode') and text()='Быстрый']\") станет кликабельным", "status": "passed", "parameters": [{"name": "locator", "value": "('xpath', \"//div[contains(@class, 'mode') and text()='Быстрый']\")"}], "start": 1745159759101, "stop": 1745159759163}], "parameters": [{"name": "locator", "value": "('xpath', \"//div[contains(@class, 'mode') and text()='Быстрый']\")"}], "start": 1745159759101, "stop": 1745159759239}], "start": 1745159759101, "stop": 1745159759239}, {"name": "Нажимаем кнопку 'Вызвать такси'", "status": "passed", "steps": [{"name": "Нажимаем на элемент ('xpath', \"//button[text()='Вызвать такси']\")", "status": "passed", "steps": [{"name": "Ждем когда элемент ('xpath', \"//button[text()='Вызвать такси']\") станет кликабельным", "status": "passed", "parameters": [{"name": "locator", "value": "('xpath', \"//button[text()='Вызвать такси']\")"}], "start": 1745159759239, "stop": 1745159759265}], "parameters": [{"name": "locator", "value": "('xpath', \"//button[text()='Вызвать такси']\")"}], "start": 1745159759239, "stop": 1745159759326}], "start": 1745159759239, "stop": 1745159759326}], "parameters": [{"name": "from_address", "value": "'Хамовнический Вал, 34'"}, {"name": "to_address", "value": "'Зубовский бульвар, 37'"}], "start": 1745159758725, "stop": 1745159759326}], "start": 1745159758181, "stop": 1745159759326}, {"name": "Выбор тарифа 'Рабочий' и делаем заказ", "status": "passed", "steps": [{"name": "Нажимаем на элемент ('xpath', \"//div[contains(@class, 'tcard') and .//div[text()='Рабочий']]\")", "status": "passed", "steps": [{"name": "Ждем когда элемент ('xpath', \"//div[contains(@class, 'tcard') and .//div[text()='Рабочий']]\") станет кликабельным", "status": "passed", "parameters": [{"name": "locator", "value": "('xpath', \"//div[contains(@class, 'tcard') and .//div[text()='Рабочий']]\")"}], "start": 1745159759327, "stop": 1745159759865}], "parameters": [{"name": "locator", "value": "('xpath', \"//div[contains(@class, 'tcard') and .//div[text()='Рабочий']]\")"}], "start": 1745159759327, "stop": 1745159759901}, {"name": "Нажимаем на элемент ('css selector', '.reqs-header')", "status": "passed", "steps": [{"name": "Ждем когда элемент ('css selector', '.reqs-header') станет кликабельным", "status": "passed", "parameters": [{"name": "locator", "value": "('css selector', '.reqs-header')"}], "start": 1745159759901, "stop": 1745159759914}], "parameters": [{"name": "locator", "value": "('css selector', '.reqs-header')"}], "start": 1745159759901, "stop": 1745159759948}, {"name": "Нажимаем на элемент ('css selector', '.smart-button-main')", "status": "passed", "steps": [{"name": "Ждем когда элемент ('css selector', '.smart-button-main') станет кликабельным", "status": "passed", "parameters": [{"name": "locator", "value": "('css selector', '.smart-button-main')"}], "start": 1745159759948, "stop": 1745159759964}], "parameters": [{"name": "locator", "value": "('css selector', '.smart-button-main')"}], "start": 1745159759948, "stop": 1745159760004}], "start": 1745159759326, "stop": 1745159760004}, {"name": "Нажимаем кнопку 'Отменить'", "status": "passed", "steps": [{"name": "Нажимаем на элемент ('xpath', \"//button[.//img[contains(@src, 'plus')]]\")", "status": "passed", "steps": [{"name": "Ждем когда элемент ('xpath', \"//button[.//img[contains(@src, 'plus')]]\") станет кликабельным", "status": "passed", "parameters": [{"name": "locator", "value": "('xpath', \"//button[.//img[contains(@src, 'plus')]]\")"}], "start": 1745159760004, "stop": 1745159760028}], "parameters": [{"name": "locator", "value": "('xpath', \"//button[.//img[contains(@src, 'plus')]]\")"}], "start": 1745159760004, "stop": 1745159760075}], "attachments": [{"name": "after_cancel_click", "source": "a232029f-a027-4288-894c-4e4ae59da5f7-attachment.png", "type": "image/png"}], "start": 1745159760004, "stop": 1745159760253}, {"name": "Проверяем, что окно заказа закрылось", "status": "failed", "statusDetails": {"message": "Failed: Окно заказа не закрылось после отмены\n", "trace": "  File \"C:\\Users\\user\\Sprint_n\\pythonProject\\tests\\test_taxi_order_flow.py\", line 189, in test_cancel_order_closes_window\n    pytest.fail(\"Окно заказа не закрылось после отмены\")\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\user\\Sprint_n\\pythonProject\\venv\\Lib\\site-packages\\_pytest\\outcomes.py\", line 178, in fail\n    raise Failed(msg=reason, pytrace=pytrace)\n"}, "steps": [{"name": "Дождаться исчезновения элемента", "status": "broken", "statusDetails": {"message": "selenium.common.exceptions.TimeoutException: Message: \n\n", "trace": "  File \"C:\\Users\\user\\Sprint_n\\pythonProject\\venv\\Lib\\site-packages\\allure_commons\\_allure.py\", line 192, in impl\n    return func(*a, **kw)\n  File \"C:\\Users\\user\\Sprint_n\\pythonProject\\pages\\base_page.py\", line 136, in wait_for_invisibility\n    WebDriverWait(self.driver, timeout).until(\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^\n        Ec.invisibility_of_element_located(locator))\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\user\\Sprint_n\\pythonProject\\venv\\Lib\\site-packages\\selenium\\webdriver\\support\\wait.py\", line 105, in until\n    raise TimeoutException(message, screen, stacktrace)\n"}, "parameters": [{"name": "locator", "value": "('css selector', '.order-body')"}, {"name": "timeout", "value": "10"}], "start": 1745159760253, "stop": 1745159770512}], "attachments": [{"name": "window_not_closed", "source": "8baa1541-02cb-486b-97f5-76ad42044bdc-attachment.png", "type": "image/png"}], "start": 1745159760253, "stop": 1745159770668}], "start": 1745159758181, "stop": 1745159770669, "uuid": "8b8d8d70-c730-4b20-bb27-177b1bda888b", "historyId": "a3b3bfd0c3d3cdd3216187227d19b969", "testCaseId": "a3b3bfd0c3d3cdd3216187227d19b969", "fullName": "tests.test_taxi_order_flow.TestTaxiOrderFlow#test_cancel_order_closes_window", "labels": [{"name": "story", "value": "Отмена заказа через кнопку 'Отменить'"}, {"name": "feature", "value": "Заказ такси"}, {"name": "tag", "value": "@pytest.mark.xfail(reason='Модальное окно заказа, не закрывается по нажатию на кнопку Отмены')"}, {"name": "parentSuite", "value": "tests"}, {"name": "suite", "value": "test_taxi_order_flow"}, {"name": "subSuite", "value": "TestTaxiOrderFlow"}, {"name": "host", "value": "bnovo-nb-0056"}, {"name": "thread", "value": "42132-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "tests.test_taxi_order_flow"}]}